(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{15:function(e,n,t){e.exports=t(38)},20:function(e,n,t){},38:function(e,n,t){"use strict";t.r(n);var a=t(0),u=t.n(a),r=t(14),c=t.n(r),l=(t(20),t(4)),o=t(3),i=t(2),m=t.n(i),s="/api/persons",f=function(){return m.a.get(s).then((function(e){return e.data}))},d=function(e){return m.a.post(s,e).then((function(e){return e.data}))},h=function(e){return m.a.delete("".concat(s,"/").concat(e)).then((function(e){return console.log(e),e.data}))},p=function(e,n){return m.a.put("".concat(s,"/").concat(e),n).then((function(e){return e.data}))},g=function(e){var n=e.persons,t=e.filterValue,a=e.deletePerson;e.setPersons;return u.a.createElement("div",null,u.a.createElement("ul",null,n.filter((function(e){return e.name.toUpperCase().includes(t.toUpperCase())})).map((function(e){return u.a.createElement("li",{key:e.name},u.a.createElement("div",null,e.name," ",e.number),u.a.createElement("button",{onClick:function(){return a(e)}},"Remove"))}))))},b=function(e){var n=e.newPerson,t=e.submitForm,a=e.handleNameChange,r=e.handleNumberChange;return u.a.createElement("div",null,u.a.createElement("form",null,u.a.createElement("div",null,u.a.createElement("div",null,"Name: ",u.a.createElement("input",{value:n.name,onChange:a})),u.a.createElement("div",null,"Number ",u.a.createElement("input",{value:n.number,onChange:r}))),u.a.createElement("div",null,u.a.createElement("button",{type:"submit",onClick:t},"add"))))},v=function(e){var n=e.newFilter,t=e.filterChange;return u.a.createElement("div",null,"Filter with ",u.a.createElement("input",{value:n,onChange:t}))},E=function(e){var n=e.message,t=e.type;return null===n?null:u.a.createElement("div",{className:t},n)},y=function(){var e=Object(a.useState)([]),n=Object(o.a)(e,2),t=n[0],r=n[1],c=Object(a.useState)({name:"",number:""}),i=Object(o.a)(c,2),m=i[0],s=i[1],y=Object(a.useState)(""),w=Object(o.a)(y,2),C=w[0],j=w[1],O=Object(a.useState)({type:!0,message:null}),N=Object(o.a)(O,2),k=N[0],P=N[1];Object(a.useEffect)((function(){f().then((function(e){r(e)}))}),[]);return u.a.createElement("div",null,u.a.createElement("h2",null,"Phonebook"),u.a.createElement(E,{message:k.message,type:k.type}),u.a.createElement(v,{filterChange:function(e){j(e.target.value),r(t)},newFilter:C}),u.a.createElement("h3",null,"Add new"),u.a.createElement(b,{newPerson:m,submitForm:function(e){if(e.preventDefault(),t.map((function(e){return e.name})).includes(m.name)){if(window.confirm("Are you sure you want to change number for ".concat(m.name,"?"))){var n=t.find((function(e){return e.name===m.name})).id;p(n,m).then((function(e){r(t.map((function(t){return t.id!==n?t:e}))),P({type:"success",message:"Number changed to ".concat(m.number)}),setTimeout((function(){P({type:null,message:null})}),5e3),s({name:"",number:""})}))}}else d(m).then((function(e){r(t.concat(e)),s({name:"",number:""}),P({type:"success",message:"".concat(m.name," added.")}),setTimeout((function(){P({type:null,message:null})}),5e3)}))},handleNameChange:function(e){return s(Object(l.a)({},m,{name:e.target.value}))},handleNumberChange:function(e){return s(Object(l.a)({},m,{number:e.target.value}))}}),u.a.createElement("h2",null,"Numbers"),u.a.createElement(g,{persons:t,setPersons:r,filterValue:C,deletePerson:function(e){window.confirm("Are you sure you want to delete ".concat(e.name,"?"))&&h(e.id).then((function(n){r(t.filter((function(n){return n.id!==e.id}))),P({type:"success",message:"".concat(e.name," deleted successfully.")}),setTimeout((function(){P({type:null,message:null})}),5e3)})).catch((function(e){P({type:"error",message:"".concat(e)}),setTimeout((function(){P({type:null,message:null})}),5e3)}))}}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(u.a.createElement(u.a.StrictMode,null,u.a.createElement(y,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[15,1,2]]]);
//# sourceMappingURL=main.f0204f46.chunk.js.map