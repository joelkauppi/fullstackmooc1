(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{15:function(e,n,t){e.exports=t(38)},20:function(e,n,t){},38:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),u=t(14),o=t.n(u),c=(t(20),t(4)),l=t(3),i=t(2),s=t.n(i),m="/api/persons",f=function(){return s.a.get(m).then((function(e){return e.data}))},d=function(e){return s.a.post(m,e).then((function(e){return console.log("response",e),e.data}))},p=function(e){return s.a.delete("".concat(m,"/").concat(e)).then((function(e){return console.log(e),e.data}))},h=function(e,n){return console.log("new person",e,n),s.a.put("".concat(m,"/").concat(e),n).then((function(e){return e.data}))},g=function(e){var n=e.persons,t=e.filterValue,a=e.deletePerson;e.setPersons;return r.a.createElement("div",null,r.a.createElement("ul",null,n.filter((function(e){return e.name.toUpperCase().includes(t.toUpperCase())})).map((function(e){return r.a.createElement("li",{key:e.name},r.a.createElement("div",null,e.name," ",e.number),r.a.createElement("button",{onClick:function(){return a(e)}},"Remove"))}))))},b=function(e){var n=e.newPerson,t=e.submitForm,a=e.handleNameChange,u=e.handleNumberChange;return r.a.createElement("div",null,r.a.createElement("form",null,r.a.createElement("div",null,r.a.createElement("div",null,"Name: ",r.a.createElement("input",{value:n.name,onChange:a})),r.a.createElement("div",null,"Number ",r.a.createElement("input",{value:n.number,onChange:u}))),r.a.createElement("div",null,r.a.createElement("button",{type:"submit",onClick:t},"add"))))},v=function(e){var n=e.newFilter,t=e.filterChange;return r.a.createElement("div",null,"Filter with ",r.a.createElement("input",{value:n,onChange:t}))},E=function(e){var n=e.message,t=e.type;return null===n?null:r.a.createElement("div",{className:t},n)},y=function(){var e=Object(a.useState)([]),n=Object(l.a)(e,2),t=n[0],u=n[1],o=Object(a.useState)({name:"",number:""}),i=Object(l.a)(o,2),s=i[0],m=i[1],y=Object(a.useState)(""),w=Object(l.a)(y,2),C=w[0],j=w[1],O=Object(a.useState)({type:!0,message:null}),N=Object(l.a)(O,2),k=N[0],P=N[1];Object(a.useEffect)((function(){f().then((function(e){u(e)}))}),[]);return r.a.createElement("div",null,r.a.createElement("h2",null,"Phonebook"),r.a.createElement(E,{message:k.message,type:k.type}),r.a.createElement(v,{filterChange:function(e){j(e.target.value),u(t)},newFilter:C}),r.a.createElement("h3",null,"Add new"),r.a.createElement(b,{newPerson:s,submitForm:function(e){if(e.preventDefault(),t.map((function(e){return e.name})).includes(s.name)){if(window.confirm("Are you sure you want to change number for ".concat(s.name,"?"))){var n=t.find((function(e){return e.name===s.name})).id;h(n,s).then((function(e){u(t.map((function(t){return t.id!==n?t:e}))),P({type:"success",message:"Number changed to ".concat(s.number)}),setTimeout((function(){P({type:null,message:null})}),5e3),m({name:"",number:""})}))}}else d(s).then((function(e){u(t.concat(e.data)),m({name:"",number:""}),P({type:"success",message:"".concat(e.data.name," added.")}),setTimeout((function(){P({type:null,message:null})}),5e3)})).catch((function(e){console.log("here2",e.response.data.error),P({type:"error",message:"".concat(e.response.data.error)}),setTimeout((function(){P({type:null,message:null})}),5e3)}))},handleNameChange:function(e){return m(Object(c.a)({},s,{name:e.target.value}))},handleNumberChange:function(e){return m(Object(c.a)({},s,{number:e.target.value}))}}),r.a.createElement("h2",null,"Numbers"),r.a.createElement(g,{persons:t,setPersons:u,filterValue:C,deletePerson:function(e){window.confirm("Are you sure you want to delete ".concat(e.name,"?"))&&p(e.id).then((function(n){u(t.filter((function(n){return n.id!==e.id}))),P({type:"success",message:"".concat(n.data.name," deleted successfully.")}),setTimeout((function(){P({type:null,message:null})}),5e3)})).catch((function(e){P({type:"error",message:"".concat(e)}),setTimeout((function(){P({type:null,message:null})}),5e3)}))}}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(y,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[15,1,2]]]);
//# sourceMappingURL=main.58f9efdf.chunk.js.map